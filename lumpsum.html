<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Lumpsum Calculator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { font-family: Arial; background:#f4f7ff; margin:0; padding:20px; }
.container {
    max-width: 500px; margin:auto; background:white;
    padding:20px; border-radius:8px; border:1px solid #d9e1ff;
}
h2 { text-align:center; color:#1d4ed8; }
label { font-weight:bold; display:block; margin-bottom:5px; }
.slider-value { background:#eef3ff; padding:4px 8px; border-radius:5px; }

input[type=range] { width:100%; }

/* REMOVE ARROWS */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button { -webkit-appearance:none; }
input[type=number]{
    -moz-appearance:textfield;
    width:70px;
    padding:6px;
    margin-left:10px;
    border:1px solid #c7d3ff;
    border-radius:5px;
    font-size:14px;
    text-align:right;
}

#result{
    margin-top:15px;
    font-size:18px;
    font-weight:bold;
    color:#1d4ed8;
    line-height:1.6;
}
canvas { margin-top:20px; }
.row { margin-bottom:20px; }

/* ========= COLLAPSIBLE FORMULA SECTION ========= */
.formula-header {
    margin-top: 25px;
    padding: 12px 15px;
    background: #eef3ff;
    border: 1px solid #c7d3ff;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    font-weight: bold;
    color: #1d4ed8;
    font-size: 16px;
}

.formula-header:hover {
    background: #e2e8ff;
}

.formula-icon {
    font-weight: bold;
    font-size: 18px;
    color: #1d4ed8;
}

.formula-content {
    display: none;
    padding: 15px;
    border: 1px solid #c7d3ff;
    border-top: none;
    border-radius: 0 0 8px 8px;
    background: #ffffff;
}

.formula-content pre {
    background: #eef3ff;
    padding: 10px;
    border-radius: 6px;
    white-space: pre-wrap;
    font-size: 14px;
    line-height: 1.4;
}
</style>
</head>

<body>

<div class="container">
    <h2>Lumpsum Calculator</h2>

    <!-- Investment Amount -->
    <div class="row">
        <label>Investment Amount (₹)</label>
        <span id="ls_inv_val" class="slider-value">200000</span>

        <input type="number" id="ls_inv_input" min="5000" max="5000000" value="200000"
            oninput="limitDigits(this,7); syncInvInput();">

        <input type="range" id="ls_inv" min="5000" max="5000000" step="10000" value="200000"
            oninput="syncInvSlider()">
    </div>

    <!-- Expected Annual Return -->
    <div class="row">
        <label>Expected Annual Return (%)</label>
        <span id="ls_ret_val" class="slider-value">12.0%</span>

        <input type="number" id="ls_ret_input" min="1" max="30" step="0.1" value="12.0"
            oninput="limitDigits(this,4); syncRetInput();">

        <input type="range" id="ls_ret" min="1" max="30" step="0.5" value="12.0"
            oninput="syncRetSlider()">
    </div>

    <!-- Duration (Years) -->
    <div class="row">
        <label>Duration (Years)</label>
        <span id="ls_year_val" class="slider-value">10</span>

        <input type="number" id="ls_year_input" min="1" max="50" step="1" value="10"
            oninput="limitDigits(this,2); syncYearInput();">

        <input type="range" id="ls_year" min="1" max="50" step="1" value="10"
            oninput="syncYearSlider()">
    </div>

    <div id="result"></div>
    <canvas id="ls_chart"></canvas>

    <!-- ============ COLLAPSIBLE FORMULA SECTION ============ -->
    <div class="formula-header" onclick="toggleFormulaLS()">
        <span>How Lumpsum Value Is Calculated?</span>
        <span id="formula_arrow_ls" class="formula-icon">▼</span>
    </div>

    <div id="formula_section_ls" class="formula-content">

        <h3>Lumpsum Future Value Formula</h3>
        <p>Lumpsum invests the entire amount at once and compounds annually:</p>

<pre>
FV = P × (1 + r)ⁿ

Where:
 P = Initial Investment
 r = Annual Return Rate (in decimal)
 n = Number of Years

Gain = FV − P
</pre>

    </div>

</div>

<script>
let lsChart;

function limitDigits(input,max){
    if(input.value.length > max){
        input.value = input.value.slice(0,max);
    }
}

/* SYNC FUNCTIONS */
function syncInvSlider(){ ls_inv_input.value = ls_inv.value; calcLS(); }
function syncInvInput(){ ls_inv.value = ls_inv_input.value; calcLS(); }

function syncRetSlider(){
    ls_ret_input.value = Number(ls_ret.value).toFixed(1);
    calcLS();
}
function syncRetInput(){
    calcLS();
}

function syncYearSlider(){ ls_year_input.value = ls_year.value; calcLS(); }
function syncYearInput(){ ls_year.value = ls_year_input.value; calcLS(); }

/* MAIN LUMPSUM CALCULATION */
function calcLS(){
    let amount = +ls_inv_input.value;
    let rate = parseFloat(ls_ret_input.value)/100;
    let years = +ls_year_input.value;

    ls_inv_val.innerText = amount;
    ls_ret_val.innerText = parseFloat(ls_ret_input.value).toFixed(1)+"%";
    ls_year_val.innerText = years;

    let fv = amount * Math.pow(1+rate, years);
    let gain = fv - amount;

    result.innerHTML =
        `Future Value: ₹${fv.toFixed(0)}<br>
         Invested: ₹${amount.toFixed(0)}<br>
         Gain: ₹${gain.toFixed(0)}`;

    if(lsChart) lsChart.destroy();
    lsChart = new Chart(document.getElementById("ls_chart"),{
        type:"pie",
        data:{
            labels:["Invested","Gain"],
            datasets:[{
                data:[amount,gain],
                backgroundColor:["#1d4ed8","#16a34a"]
            }]
        }
    });
}

calcLS();

/* COLLAPSIBLE FORMULA */
function toggleFormulaLS() {
    const section = document.getElementById("formula_section_ls");
    const arrow = document.getElementById("formula_arrow_ls");

    if (section.style.display === "block") {
        section.style.display = "none";
        arrow.innerHTML = "▼";
    } else {
        section.style.display = "block";
        arrow.innerHTML = "▲";
    }
}
</script>

</body>
</html>
